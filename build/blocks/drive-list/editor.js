!function(){"use strict";var e={n:function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,{a:l}),l},d:function(t,l){for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};!function(e,t,l){var n=window.wp.element,r=window.wp.blocks,i=window.wp.i18n,o=window.wp.blockEditor,a=window.wp.components,s=window.wp.apiFetch,d=l.n(s),c=JSON.parse('{"apiVersion":2,"name":"wp-drive-list/drive-list","title":"Drive list","category":"text","description":"Lists files in a shared Google Drive folder","keywords":["drive","google","file"],"icon":"list-view","textdomain":"wp-drive-list","attributes":{"url":{"type":"string"},"depth":{"type":"integer"},"download":{"type":"boolean"}},"editorScript":"file:./editor.js"}');const p=(0,i.__)("No files to display","wp-drive-list"),w=e=>{let{tree:t}=e;return(0,n.createElement)("ul",{className:"wp-drive-list-list"},t.map(((e,t)=>(0,n.createElement)("li",{key:`${t}`},"file"===e.type?(0,n.createElement)("a",{href:e.url},e.name):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("span",{className:"wp-drive-list-folder-name"},e.name),(0,n.createElement)(w,{tree:e.children}))))))};(0,r.registerBlockType)(c,{edit:e=>{let{attributes:t,setAttributes:l}=e;const{url:r="",depth:s=1,download:c=!0}=t,[u,x]=(0,n.useState)([]);return(0,n.useEffect)((()=>{d()({path:`wp-drive-list/v1/drive/tree?url=${r}&depth=${s}&download=${c}`}).then((e=>{x(e)}))}),[r,s,c]),(0,n.createElement)("div",(0,o.useBlockProps)(),(0,n.createElement)(o.InspectorControls,null,(0,n.createElement)(a.PanelBody,{title:(0,i.__)("Basic settings","wp-drive-list"),initialOpen:!0},(0,n.createElement)(a.PanelRow,null,(0,n.createElement)(a.TextControl,{label:(0,i.__)("Shared folder URL","wp-drive-list"),value:r,placeholder:"https://drive.google.com/drive/folders/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",onChange:e=>{l({...t,url:e})}})),(0,n.createElement)(a.PanelRow,null,(0,n.createElement)(a.TextControl,{label:(0,i.__)("Scan depth","wp-drive-list"),help:(0,i.__)("Number of subfolders to scan","wp-drive-list"),value:s,type:"number",min:"1",onChange:e=>{l({...t,depth:parseInt(e)})}})),(0,n.createElement)(a.PanelRow,null,(0,n.createElement)(a.CheckboxControl,{label:(0,i.__)("Download files","wp-drive-list"),help:(0,i.__)("Download files or open in browser","wp-drive-list"),checked:c,onChange:e=>{l({...t,download:e})}})))),u.length>0?(0,n.createElement)(w,{tree:u}):(0,n.createElement)("div",null,p))},save:()=>(0,n.createElement)("div",o.useBlockProps.save(),p)})}(0,0,e)}();