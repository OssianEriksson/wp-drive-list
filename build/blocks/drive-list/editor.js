!function(){"use strict";var e={n:function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,{a:l}),l},d:function(t,l){for(var r in l)e.o(l,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:l[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};!function(e,t,l){var r=window.wp.element,n=window.wp.blocks,i=window.wp.i18n,o=window.wp.blockEditor,a=window.wp.components,d=window.wp.apiFetch,s=l.n(d),c=JSON.parse('{"apiVersion":2,"name":"wp-drive-list/drive-list","title":"Drive list","category":"text","description":"Lists files in a shared Google Drive folder","keywords":["drive","google","file"],"icon":"list-view","textdomain":"wp-drive-list","attributes":{"url":{"type":"string"},"depth":{"type":"integer"},"download":{"type":"boolean"}},"example":{"attributes":{"url":"https://drive.google.com/drive/u/1/folders/1bDlz9paOUv-YgEBc1DtLqiPmCrKAnVmO","depth":2,"download":true}},"editorScript":"file:./editor.js"}');const p=(0,i.__)("No files to display","wp-drive-list"),u=e=>{let{tree:t}=e;return(0,r.createElement)("ul",{className:"wp-drive-list-list"},t.map(((e,t)=>(0,r.createElement)("li",{key:`${t}`},"file"===e.type?(0,r.createElement)("a",{href:e.url},e.name):(0,r.createElement)(r.Fragment,null,(0,r.createElement)("span",{className:"wp-drive-list-folder-name"},e.name),(0,r.createElement)(u,{tree:e.children}))))))};(0,n.registerBlockType)(c,{edit:e=>{let{attributes:t,setAttributes:l}=e;const{url:n="",depth:d=1,download:c=!0}=t,[w,x]=(0,r.useState)([]);return(0,r.useEffect)((()=>{s()({path:`wp-drive-list/v1/drive/tree?url=${n}&depth=${d}&download=${c}`}).then((e=>{x(e)}))}),[n,d,c]),(0,r.createElement)("div",(0,o.useBlockProps)(),(0,r.createElement)(o.InspectorControls,null,(0,r.createElement)(a.PanelBody,{title:(0,i.__)("Basic settings","wp-drive-list"),initialOpen:!0},(0,r.createElement)(a.PanelRow,null,(0,r.createElement)(a.TextControl,{label:(0,i.__)("Shared folder URL","wp-drive-list"),value:n,placeholder:"https://drive.google.com/drive/folders/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",onChange:e=>{l({...t,url:e})}})),(0,r.createElement)(a.PanelRow,null,(0,r.createElement)(a.TextControl,{label:(0,i.__)("Scan depth","wp-drive-list"),help:(0,i.__)("Number of subfolders to scan","wp-drive-list"),value:d,type:"number",min:"1",onChange:e=>{l({...t,depth:parseInt(e)})}})),(0,r.createElement)(a.PanelRow,null,(0,r.createElement)(a.CheckboxControl,{label:(0,i.__)("Download files","wp-drive-list"),help:(0,i.__)("Download files or open in browser","wp-drive-list"),checked:c,onChange:e=>{l({...t,download:e})}})))),w.length>0?(0,r.createElement)(u,{tree:w}):(0,r.createElement)("div",null,p))},save:()=>(0,r.createElement)("div",o.useBlockProps.save(),p)})}(0,0,e)}();